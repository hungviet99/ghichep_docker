# Containers

## 1. Docker Containers - The TLDR

Một image có thể sử dụng để tạo 1 hoặc nhiều container. Cách đơn giản nhất để start 1 container là sử dụng `docker container run`.

![](./images/docker6.png)

## 2. Docker containers - The deep dive

### 2.1. Containers vs VMs

Cả Containers và VMs để cần host để chạy. 

Trong mô hình VM, sau khi các server vật lý được bật, các hypervisor được khởi động. Sau đso hypervisor sẽ xác nhận quyền sở hữu đối với tất cả các tài nguyên vật lý trên hệ thống như RAM, CPU, storage và NICs. Sau đó, nó khắc các tài nguyên phần cứng này thành các phiên bản ảo hóa gọi là VM. Ta sẽ sử dụng các VM để cài đặt hệ điều hành và ứng dụng trên mỗi máy ảo. 

![](./images/docker7.png)

Với mô hình container, Hệ điều hành yêu cầu tất cả các tài nguyên phần cứng. Trên hệ điều hành, ta cài đặt container engine là Docker. Sau đó, công cụ container sẽ lấy các tài nguyên hệ điều hành và ghép chúng lại thành các cấu trúc riêng biệt được gọi là container. Mỗi container giống như 1 hệ điều hành thực sự. Bên trong mỗi container sẽ chạy 1 ứng dụng. 

![](./images/docker8.png)

### 2.2. The VM tax

### 2.3. Running containers

### 2.4. Checking that Docker is running

Kiểm tra các trạng thái của docker

```
service docker status
```
### 2.5. Starting a simple container

Cách đơn giản nhất để start 1 container là sử dụng `docker container run`

```
root@dockersrv:~# docker container run -it ubuntu:latest /bin/bash
Unable to find image 'ubuntu:latest' locally
latest: Pulling from library/ubuntu
5d3b2c2d21bb: Pull complete
3fc2062ea667: Pull complete
75adf526d75b: Pull complete
Digest: sha256:b4f9e18267eb98998f6130342baacaeb9553f136142d40959a1b46d6401f0f2b
Status: Downloaded newer image for ubuntu:latest
```

`docker container run` yêu cầu 1 docker chạy 1 container mới. `-it` để tương tác với container và gắn nó bào shell hiện tại.
 
Khi run docker, nếu không tìm thấy ở local, nó sẽ lên Docker Hub để tìm kiếm, nếu tìm thấy nó sẽ pull về local. Sau khi image được pull, `containerd` và `runc` sẽ hướng dẫn nó tạo và start container. 

### 2.6. Container processes




